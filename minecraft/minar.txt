local tArgs = { ... }
local turno = false
filtro = {}
filtro["minecraft:cobblestone"] = 0
filtro["minecraft:sanstone"] = 1
filtro["explorercraft:marble"] = 2
filtro["minecraft:gravel"] = 3
filtro["minecraft:sand"] = 4
filtro["minecraft:stone"] = 5
filtro["explorercraft:basalt"] = 6
filtro["minecraft:dirt"] = 7

if #tArgs ~= 2 then
    print("Program <rows> <cows>")
    return
end

--Si no está en el filtro devuelve nil
function NumIdBlock(strID)
    return filtro[strID]
end

function MinarConFiltro(direction)
    local success, data = turtle.inspect() --si no hay bloque es más rápido no minar
    if success then
        if NumIdBlock(data.name) ~= nil then
            if(direction) then
                turtle.digDown()
            else
                turtle.dig()
            end
        else
            if(direction) then
                --debe ser un hacha para no conseguir objeto
                turtle.digDown("right")
            else
                --debe ser un hacha para no conseguir objeto
                turtle.dig("right")
            end
        end
    end
end

--BuscaCombustible y lo usa
function Combustible()
    for i=1,16 do
        turtle.select(i)
        turtle.refuel()
    end
    turtle.select(1)
end

Combustible()
--Bucle "Eje Y"
    --Bucle "Eje X"
MinarConFiltro(true)
turtle.down()
for i = 1, tonumber(tArgs[1]) do
    if turno then
        MinarConFiltro(false)
        turtle.forward()
        -- direction <-
        turtle.turnLeft()
    else
        -- direction ->
        turtle.turnRight()
    end
    for j = 1, tonumber(tArgs[2]) do
        MinarConFiltro(false)
        turtle.forward()
    end
    if turno then
        -- direction ->
        turtle.turnRight()
    else
        -- direction <-
        turtle.turnLeft()
        MinarConFiltro(false)
        turtle.forward()
    end
    turno = not turno
end
